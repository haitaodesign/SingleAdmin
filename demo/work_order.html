<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>工单申请</title>
    <link rel="stylesheet" href="/css/thirdParty/bootstrap.css">
    <link rel="stylesheet" href="/css/thirdParty/bootstrap-datetimepicker.css">
    <link rel="stylesheet" href="/css/thirdParty/font-awesome.min.css">
    <style>
        .workorderbtn {
            margin-left: 300px;
            width: 100px;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <form id="addworkorder" action="/" class="form-horizontal">
            <div class="form-group">
                <label for="" class="col-sm-2 control-label">工单类型:</label>
                <div class="col-sm-3">
                    <select class="form-control">
                            <option></option>
                            <optgroup label="排序">
                                <option>按价格 从低到高</option>
                                <option>按价格 从高到低</option>
                                <option>按剩余时间 从少到多</option>
                                <option>按剩余时间 从多到少</option>
                            </optgroup>
                            <optgroup label="显示">
                                <option>列表方式</option>
                                <option>图片方式</option>
                                <option>纯文字方式</option>
                            </optgroup>
                            <optgroup label="数量">
                                <option>每页显示20个</option>
                                <option>每页显示30个</option>
                                <option>每页显示80个</option>
                            </optgroup>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="" class="col-sm-2 control-label">工单标题:</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control" name="" value="" required="required">
                </div>
            </div>
            <div class="form-group">
                <label for="" class="col-sm-2 control-label">工单类型:</label>
                <div class="col-sm-3">
                    <select class="form-control">
                                <option>一般</option>
                                <option>紧急</option>
                                <option>十分紧急</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="" class="col-sm-2 control-label">客户姓名:</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control" name="" value="">
                </div>
            </div>
            <div class="form-group">
                <label for="" class="col-sm-2 control-label">客户电话:</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control" name="" value="">
                </div>
            </div>
            <div class="form-group">
                <label for="" class="col-sm-2 control-label">问题描述:</label>
                <div class="col-sm-3">
                    <textarea class="form-control" rows="5" cols="37"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label for="" class="col-sm-2 control-label">指派部门:</label>
                <div class="col-sm-3">
                    <select class="form-control">
                                <option>品牌组</option>
                                <option>组1</option>
                                <option>组2</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="" class="col-sm-2 control-label">指派处理人:</label>
                <div class="col-sm-3">
                    <select class="form-control">
                                <option>品牌组</option>
                                <option>组1</option>
                                <option>组2</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="" class="col-sm-2 control-label ">期望处理时间:</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control handletime" readonly required="required" style="background-color:#fff;">
                </div>
            </div>
            <div class="form-group">
                <label for="" class="col-sm-2 control-label">上传附件:</label>
                <div class="col-sm-3">
                    <input type="file" id="fileinput" accept=".doc,.jpg,.png,.pdf,.docx">
                </div>
                <div class="col-sm-1">
                    <button class="btn btn-danger btn-xs deletefilebtn" style="float:right;">删除</button>
                </div>
                <p class="help-block fileinputhelp"></p>
            </div>
            <button type="submit" class="btn btn-default workorderbtn">提交</button>
        </form>
    </div>
    <script src="/js/thirdParty/jquery.min.js"></script>
    <script src="/js/thirdParty/bootstrap.min.js"></script>
    <script src="/js/thirdParty/bootstrap-datetimepicker.js"></script>
    <script src="/js/thirdParty/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="/js/thirdParty/jquery.form.min.js"></script>
    <script>
        ;
        (function() {
            $('#fileinput').on('change', function() {
                var filename = this.value;
                var filepoint = filename.lastIndexOf('.');
                var fileext = filename.substr(filepoint + 1);


                if (isfiletype(fileext) === 0) {
                    $('.fileinputhelp').text('不支持该文件类型上传');
                    this.value = '';
                } else {
                    $('.fileinputhelp').text('');
                }
            });

            function isfiletype(fileext) {
                var fileextarr = ['docx', 'doc', 'jpg', 'png', 'pdf'];
                var isfile = 0;
                for (var i = 0; i < fileextarr.length; i++) {
                    if (fileext === fileextarr[i]) {
                        isfile++;
                        return;
                    }
                }
                return isfile;
            }

            $('.deletefilebtn').on('click', function(e) {
                e.preventDefault();
                $('#fileinput').val('');
            });

            $('.handletime').datetimepicker({
                language: 'zh-CN',
                format: "yyyy-mm-dd HH:ii",
                showMeridian: true,
                autoclose: true,
                todayBtn: true
            });

            //表单验证异步提交
            function bindsumbit() {
                var $submit_application = $('#addworkorder');
                var options = {
                    beforeSerialize: function() {},
                    beforeSubmit: function() {
                        $('.workorderbtn').button('loading');
                    },
                    success: function(data) {
                        //layer.msg(data.Message);
                    },
                    error: function() {
                        //layer.msg("提交失败，请检查网络是否正常，或者刷新试试！");
                        $('.workorderbtn').button('reset');
                    }
                };
                $submit_application.ajaxForm(options);
            }
            $().ready(function() {
                bindsumbit();
            });

        })();
    </script>
</body>

</html>