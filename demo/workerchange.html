<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>员工异动</title>
    <style>
    .layui-btn-add{
        float: left;
    }
    .layui-form-search{
        float: right;
        margin-right: 20px;
    }
    .layui-table-changelist{
        clear: both;
        margin-right: 10px;
    }
    .layui-form-changetype{
        float: left;
    }
    </style>
</head>
<body>
    <div class="layui-btn-add">
        <button class="layui-btn workerchangeadd" data-type="reload">添加</button>
    </div>
    <div class="layui-form layui-form-changetype">
        <label class="layui-form-label">类型：</label>
        <div class="layui-input-inline">
            <select name="" id="" lay-filter="changetype">
                <option value="">入职人</option>
                <option value="">离职人</option>
            </select>
        </div>
    </div>
    <div class="layui-form-search">
        <form class="layui-form">
            <div class="layui-form-item">
                <div class="layui-inline">
                        <label class="layui-form-label">日期范围</label>
                        <div class="layui-input-inline">
                            <input type="text" name="changedate" class="layui-input" id="changedate" placeholder="请选择日期范围">
                        </div>
                        <label class="layui-form-label">姓名：</label>
                        <div class="layui-input-inline">
                            <input type="text" name="name" lay-verify="title" placeholder="请输入姓名查询" autocomplete="off" class="layui-input">
                        </div>
                        <button class="layui-btn" lay-submit lay-filter="workchangesearch" style="margin-left:150px;">查询</button>
                </div>
            </div>
        </form>
    </div>
    <div class="layui-table-changelist">
        <table class="layui-hide" id="workerchange-manage" lay-filter="workercahnge"></table>
    </div>
    <script type="text/html" id="addworkerchange">
        <form class="layui-form" style="margin-top:20px;margin-left:50px;">
                <div class="layui-form-item">
                        <div class="layui-input-inline">
                            <input type="text" name="title" lay-verify="title" placeholder="请输入工号或姓名" autocomplete="off" class="layui-input">
                        </div>
                        <button class="layui-btn" lay-submit lay-filter="changeworksearch">查询</button>
                </div>
        </form>
        <fieldset class="layui-elem-field layui-field-title">
                <legend>员工当前信息</legend>
                <div class="layui-field-box" style="padding:0 20px;">
                        <table class="layui-table">
                            <tr>
                                <td>员工工号</td>
                                <td></td>
                                <td>姓名</td>
                                <td></td>
                                <td>性别</td>
                                <td></td>
                                <td>联系方式</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>原服务公司</td>
                                <td></td>
                                <td>原部门</td>
                                <td></td>
                                <td>原所属分组</td>
                                <td></td>
                                <td>原职位名称</td>
                                <td>ffffffffff</td>
                            </tr>
                            <tr>
                                <td>原工资状况</td>
                                <td></td>
                                <td>原社保福利及补贴</td>
                                <td></td>
                                <td>原合同起止日</td>
                                <td></td>
                                <td>其他</td>
                                <td></td>
                            </tr>
                        </table>
                </div>
        </fieldset>
        <fieldset class="layui-elem-field layui-field-title">
                <legend>员工调动信息填写</legend>
                <div class="changeform">
                    <div class="layui-tab">
                            <ul class="layui-tab-title">
                                <li class="layui-this">调岗</li>
                                <li>调级</li>
                                <li>调薪</li>
                            </ul>
                            <div class="layui-tab-content">
                                <div class="layui-tab-item layui-show">
                                <div class="layui-field-box">
                                    <form class="layui-form">
                                        <div class="layui-form-item">
                                                <div class="layui-input-inline" style="display:none;">
                                                        <input type="text" name="changetype"  lay-verify="title" autocomplete="off" class="layui-input">
                                                </div>
                                                <label class="layui-form-label">现部门：</label>
                                                <div class="layui-input-inline">
                                                    <select name="quiz2">
                                                            <option value="">全部</option>
                                                    </select>
                                                </div>
                                                <label class="layui-form-label">现职位名称：</label>
                                                <div class="layui-input-inline">
                                                    <select name="quiz2">
                                                            <option value="">全部</option>
                                                    </select>
                                                </div>
                                                <label class="layui-form-label">现所属分组：</label>
                                                <div class="layui-input-inline">
                                                    <select name="quiz2">
                                                            <option value="">全部</option>
                                                    </select>
                                                </div>
                                        </div>
                                        <div class="layui-form-item">
                                                <label class="layui-form-label">现工资情况：</label>
                                                <div class="layui-input-inline">
                                                    <input type="text" name="name"  lay-verify="required|number" autocomplete="off" class="layui-input">
                                                </div>
                                                <label class="layui-form-label">现社保福利及补贴：</label>
                                                <div class="layui-input-inline">
                                                    <input type="text" name="name"  lay-verify="title" autocomplete="off" class="layui-input">
                                                </div>
                                                <label class="layui-form-label">现合同起止：</label>
                                                <div class="layui-input-inline">
                                                    <input type="text" name="name"  lay-verify="title" autocomplete="off" class="layui-input">
                                                </div>
                                        </div>
                                        <div class="layui-form-item">
                                                <label class="layui-form-label">现职位情况：</label>
                                                <div class="layui-input-block">
                                                        <input type="radio" name="sex" value="岗位人员调离" title="岗位人员调离" checked="">
                                                        <input type="radio" name="sex" value="同岗位编制内增加" title="同岗位编制内增加">
                                                        <input type="radio" name="sex" value="现职位空缺" title="现职位空缺">
                                                </div>
                                        </div>
                                        <div class="layui-form-item">
                                                <label class="layui-form-label">异动说明：</label>
                                                <div class="layui-input-block">
                                                    <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
                                                </div>
                                        </div>
                                        <div class="layui-form-item">
                                            <button class="layui-btn" lay-submit lay-filter="addchangework" style="margin-left:150px;">确认</button>
                                            <button class="layui-btn layui-btn-normal closechange">关闭</button>
                                        </div>
                                    </form>
                                </div>
                                </div>
                                <div class="layui-tab-item">
                                    <div class="layui-field-box">
                                                    <form class="layui-form">
                                                        <div class="layui-form-item">
                                                                <div class="layui-input-inline" style="display:none;">
                                                                        <input type="text" name="changetype"  lay-verify="title" autocomplete="off" class="layui-input">
                                                                </div>
                                                                <label class="layui-form-label">现职位名称：</label>
                                                                <div class="layui-input-inline">
                                                                    <select name="quiz2">
                                                                            <option value="">全部</option>
                                                                    </select>
                                                                </div>
                                                        </div>
                                                        <div class="layui-form-item">
                                                                <label class="layui-form-label">现工资情况：</label>
                                                                <div class="layui-input-inline">
                                                                    <input type="text" name="name"  lay-verify="title" autocomplete="off" class="layui-input">
                                                                </div>
                                                                <label class="layui-form-label">现社保福利及补贴：</label>
                                                                <div class="layui-input-inline">
                                                                    <input type="text" name="name"  lay-verify="title" autocomplete="off" class="layui-input">
                                                                </div>
                                                                <label class="layui-form-label">现合同起止：</label>
                                                                <div class="layui-input-inline">
                                                                    <input type="text" name="name"  lay-verify="title" autocomplete="off" class="layui-input">
                                                                </div>
                                                        </div>
                                                        <div class="layui-form-item">
                                                                <label class="layui-form-label">现职位情况：</label>
                                                                <div class="layui-input-block">
                                                                        <input type="radio" name="sex" value="岗位人员调离" title="岗位人员调离" checked="">
                                                                        <input type="radio" name="sex" value="同岗位编制内增加" title="同岗位编制内增加">
                                                                        <input type="radio" name="sex" value="现职位空缺" title="现职位空缺">
                                                                </div>
                                                        </div>
                                                        <div class="layui-form-item">
                                                                <label class="layui-form-label">异动说明：</label>
                                                                <div class="layui-input-block">
                                                                    <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="layui-form-item">
                                                            <button class="layui-btn" lay-submit lay-filter="addchangework" style="margin-left:150px;">确认</button>
                                                            <button class="layui-btn layui-btn-normal closechange">关闭</button>
                                                        </div>
                                                    </form>
                                                </div>
                                    </div>
                                <div class="layui-tab-item">
                                        <div class="layui-field-box">
                                                <form class="layui-form">
                                                    <div class="layui-form-item">
                                                            <div class="layui-input-inline" style="display:none;">
                                                                <input type="text" name="changetype"  lay-verify="title" autocomplete="off" class="layui-input">
                                                            </div>
                                                    </div>
                                                    <div class="layui-form-item">
                                                            <label class="layui-form-label">现工资情况：</label>
                                                            <div class="layui-input-inline">
                                                                <input type="text" name="name"  lay-verify="title" autocomplete="off" class="layui-input">
                                                            </div>
                                                            <label class="layui-form-label">现社保福利及补贴：</label>
                                                            <div class="layui-input-inline">
                                                                <input type="text" name="money" value="10000"  lay-verify="title" autocomplete="off" class="layui-input">
                                                            </div>
                                                            <label class="layui-form-label">现合同起止：</label>
                                                            <div class="layui-input-inline">
                                                                <input type="text" name="name"  lay-verify="title" autocomplete="off" class="layui-input">
                                                            </div>
                                                    </div>
                                                    <div class="layui-form-item">
                                                            <label class="layui-form-label">异动说明：</label>
                                                            <div class="layui-input-block">
                                                                <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
                                                            </div>
                                                    </div>
                                                    <div class="layui-form-item">
                                                        <button class="layui-btn" lay-submit lay-filter="addchangework" style="margin-left:150px;">确认</button>
                                                        <button class="layui-btn layui-btn-normal closechange">关闭</button>
                                                    </div>
                                                </form>
                                            </div>
                                </div>
                                </div>
                            </div>
                    </div>    
                </div>
                        
                

        </fieldset>
    </script>
    <script>
        layui.use(['form','laydate','table','layer','element'],function(){
            var form = layui.form,
            laydate = layui.laydate,
            table = layui.table,
            layer = layui.layer,
            element = layui.element;

            // 监听查询事件
            form.on('submit(workchangesearch)',function(obj){
                console.log(obj);
                return false;
            });
            // 监听员工工号或姓名查询
            form.on('submit(changeworksearch)',function(obj){
                console.log('aaa');
                return false;
            });
            // 监听类型下拉值，刷新表格数据
            form.on('select(changetype)',function(obj){
                console.log(obj);
            });

            // 监听确认员工变动信息列表
            form.on('submit(addchangework)',function(obj){
                console.log(obj.field);
                layer.closeAll();
                return false;
            });

            laydate.render({
                elem:'#changedate',
                type:'month',
                range:true
            });


            var workdercahngetableins = table.render({
                elem:"#workerchange-manage",
                url:'/mockdata/fulltimedata.json',
                cols:[[
                    {field:'id',title:'序号',width:100},
                    {field:'name',title:'生效日期',width:100},
                    {field:'dept',title:'档案编号',width:150},
                    {field:'position',title:'类型',width:120},
                    {field:'fulltimedate',title:'公司',width:120},
                    {field:'classify', title: '部门', width:150},
                    {field:'wealth', title: '职位',  width:150},
                    {field:'weixinorqq',title:'姓名',width:120},
                    {field:'weixinorqq',title:'入职',width:120},
                    {field:'weixinorqq',title:'薪资终态',width:120},
                    {field:'weixinorqq',title:'薪资备注',width:120},
                ]],
                page:true,
                height:750
            })

         
            // 监听添加按钮事件
            $('.workerchangeadd').on('click',function(){
                var workchangecontent = $('#addworkerchange').html();
                // layer.open({
                //     type:1,
                //     title:'添加员工调用信息',
                //     content:workchangecontent,
                //     area:['1080px','800px'],
                //     closeBtn:1
                // });
                layer.open({
                    type:1,
                    title:'添加员工调用信息',
                    content:workchangecontent,
                    area:['1080px','800px']
                });
                form.render('radio');
                form.render('select');
            });

            form.render();

            $(document).on('click','.closechange',function(e){
                e.preventDefault();
                layer.closeAll();
            })

        })
    </script>
</body>
</html>